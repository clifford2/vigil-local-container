# Vigil local probe relay
# Configuration file
# Example based on: https://github.com/valeriansaliou/vigil-local/blob/master/config.cfg


[server]

# debug, info, warn, error, default: error
log_level = "debug"

[report]

# URL of Vigil server to report status to
endpoint = "https://status.example.com"
# Server's reporter_token (as configured on Server's config file)
token = "YOUR_TOKEN_SECRET"

[metrics]

interval = 120

poll_retry = 2

poll_delay_dead = 10
poll_delay_sick = 1

[probe]

[[probe.service]]

id = "internal"

[[probe.service.node]]

id = "gateway"
mode = "poll"

replicas = [
  "icmp://127.0.0.1",
  "icmp://192.168.1.1"
]

[[probe.service.node]]

id = "capacity"
mode = "script"

scripts = [
  '''
  # Consider as healthy
  exit 0
  '''
]
